<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.58.3" />
    <meta name="description" content="MLOps: Operationalizing Machine Learning">
<meta name="author" content="Theja Tulabandhula">

    <link rel="shortcut icon" href="/MLOps/images/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" sizes="180x180" href="/MLOps/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/MLOps/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/MLOps/images/favicon-16x16.png">
<link rel="manifest" href="/MLOps/images/site.webmanifest">
    <title>Docker :: MLOps: Operationalizing Machine Learning</title>

    
    <link href="/MLOps/css/nucleus.css" rel="stylesheet">
    <link href="/MLOps/css/fontawesome-all.min.css" rel="stylesheet">
    <link href="/MLOps/css/hybrid.css" rel="stylesheet">
    <link href="/MLOps/css/featherlight.min.css" rel="stylesheet">
    <link href="/MLOps/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/MLOps/css/auto-complete.css" rel="stylesheet">
    <link href="/MLOps/css/atom-one-dark-reasonable.css" rel="stylesheet">
    <link href="/MLOps/css/theme.css" rel="stylesheet">
    <link href="/MLOps/css/hugo-theme.css" rel="stylesheet">
    
      <link href="/MLOps/css/theme-blue.css" rel="stylesheet">
    

    <script src="/MLOps/js/jquery-3.3.1.min.js"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/MLOps/lecture3/docker/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a href="/MLOps/"> <img src="/MLOps/images/logo.png" alt="MLOps"></a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/MLOps/js/lunr.min.js"></script>
<script type="text/javascript" src="/MLOps/js/auto-complete.js"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/chicagodatascience.github.io\/MLOps\/";
    
</script>
<script type="text/javascript" src="/MLOps/js/search.js"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/MLOps/logistics/" title="Course Logistics" class="dd-item 
        
        
        
        ">
      <a href="/MLOps/logistics/">
          <b> </b>Course Logistics
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/MLOps/logistics/online_technology_requirements/" title="Online Learning Details" class="dd-item ">
        <a href="/MLOps/logistics/online_technology_requirements/">
        Online Learning Details
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/logistics/schedule/" title="Schedule" class="dd-item ">
        <a href="/MLOps/logistics/schedule/">
        <b> </b>Schedule
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/logistics/project_instructions/" title="Project" class="dd-item ">
        <a href="/MLOps/logistics/project_instructions/">
        <b> </b>Project
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/MLOps/lecture1/" title="Lecture 1" class="dd-item 
        
        
        
        ">
      <a href="/MLOps/lecture1/">
          <b> </b>Lecture 1
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture1/intro/" title="Basics" class="dd-item ">
        <a href="/MLOps/lecture1/intro/">
        <b> 1. </b>Basics
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture1/ssh_and_firewall/" title="SSH and Firewall" class="dd-item ">
        <a href="/MLOps/lecture1/ssh_and_firewall/">
        <b> 2. </b>SSH and Firewall
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture1/conda/" title="Setting up Python" class="dd-item ">
        <a href="/MLOps/lecture1/conda/">
        <b> 3. </b>Setting up Python
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture1/jupyter/" title="Remote Jupyter Server" class="dd-item ">
        <a href="/MLOps/lecture1/jupyter/">
        <b> 4. </b>Remote Jupyter Server
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/MLOps/lecture1/recommendation_model/" title="Recommendation Models" class="dd-item 
        
        
        
        ">
      <a href="/MLOps/lecture1/recommendation_model/">
          <b>5. </b>Recommendation Models
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture1/recommendation_model/surprise_training/" title="Recommendation (SVD) Training" class="dd-item ">
        <a href="/MLOps/lecture1/recommendation_model/surprise_training/">
        <b> </b>Recommendation (SVD) Training
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture1/recommendation_model/surprise_inference/" title="Recommendation (SVD) Inference" class="dd-item ">
        <a href="/MLOps/lecture1/recommendation_model/surprise_inference/">
        <b> </b>Recommendation (SVD) Inference
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture1/recommendation_model/pytorch_training/" title="Recommendation (Pytorch) Training" class="dd-item ">
        <a href="/MLOps/lecture1/recommendation_model/pytorch_training/">
        <b> </b>Recommendation (Pytorch) Training
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture1/recommendation_model/pytorch_inference/" title="Recommendation (Pytorch) Inference" class="dd-item ">
        <a href="/MLOps/lecture1/recommendation_model/pytorch_inference/">
        <b> </b>Recommendation (Pytorch) Inference
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture1/deploy_webserver/" title="Serving ML Models Using Web Servers" class="dd-item ">
        <a href="/MLOps/lecture1/deploy_webserver/">
        <b> 6. </b>Serving ML Models Using Web Servers
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture1/flask/" title="Flask App" class="dd-item ">
        <a href="/MLOps/lecture1/flask/">
        <b> 7. </b>Flask App
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture1/exercises/" title="Exercises" class="dd-item ">
        <a href="/MLOps/lecture1/exercises/">
        <b> </b>Exercises
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/MLOps/lecture2/" title="Lecture 2" class="dd-item 
        
        
        
        ">
      <a href="/MLOps/lecture2/">
          <b> </b>Lecture 2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture2/serverless/" title="Serverless Deployments" class="dd-item ">
        <a href="/MLOps/lecture2/serverless/">
        <b>1. </b>Serverless Deployments
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture2/cloud_functions/" title="Cloud Functions" class="dd-item ">
        <a href="/MLOps/lecture2/cloud_functions/">
        <b>2. </b>Cloud Functions
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture2/cloud_functions_model/" title="GCP Serverless Model Serving" class="dd-item ">
        <a href="/MLOps/lecture2/cloud_functions_model/">
        <b>3. </b>GCP Serverless Model Serving
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture2/lambda_functions/" title="Lambda Functions" class="dd-item ">
        <a href="/MLOps/lecture2/lambda_functions/">
        <b>4. </b>Lambda Functions
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture2/lambda_functions_model/" title="AWS Serverless Model Serving" class="dd-item ">
        <a href="/MLOps/lecture2/lambda_functions_model/">
        <b>5. </b>AWS Serverless Model Serving
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture2/exercises/" title="Exercises" class="dd-item ">
        <a href="/MLOps/lecture2/exercises/">
        <b> </b>Exercises
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/MLOps/lecture3/" title="Lecture 3" class="dd-item 
        parent
        
        
        ">
      <a href="/MLOps/lecture3/">
          <b> </b>Lecture 3
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture3/intro/" title="Introduction" class="dd-item ">
        <a href="/MLOps/lecture3/intro/">
        <b>1. </b>Introduction
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture3/docker/" title="Docker" class="dd-item active">
        <a href="/MLOps/lecture3/docker/">
        <b>2. </b>Docker
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture3/ecr/" title="Orchestration using ECS and ECR - Part I" class="dd-item ">
        <a href="/MLOps/lecture3/ecr/">
        <b>3. </b>Orchestration using ECS and ECR - Part I
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture3/ecs/" title="Orchestration using ECS and ECR - Part II" class="dd-item ">
        <a href="/MLOps/lecture3/ecs/">
        <b>4. </b>Orchestration using ECS and ECR - Part II
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture3/exercises/" title="Exercises" class="dd-item ">
        <a href="/MLOps/lecture3/exercises/">
        <b> </b>Exercises
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/MLOps/lecture4/" title="Lecture 4" class="dd-item 
        
        
        
        ">
      <a href="/MLOps/lecture4/">
          <b> </b>Lecture 4
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture4/kubernetes/" title="Kubernetes" class="dd-item ">
        <a href="/MLOps/lecture4/kubernetes/">
        <b>1. </b>Kubernetes
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture4/modelkube/" title="Model Serving using Kubernetes" class="dd-item ">
        <a href="/MLOps/lecture4/modelkube/">
        <b>2. </b>Model Serving using Kubernetes
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture4/gke/" title="Orchestration using GKE" class="dd-item ">
        <a href="/MLOps/lecture4/gke/">
        <b>3. </b>Orchestration using GKE
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture4/exercises/" title="Exercises" class="dd-item ">
        <a href="/MLOps/lecture4/exercises/">
        <b> </b>Exercises
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/MLOps/lecture5/" title="Lecture 5" class="dd-item 
        
        
        
        ">
      <a href="/MLOps/lecture5/">
          <b> </b>Lecture 5
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture5/workflow/" title="Data Science Workflows" class="dd-item ">
        <a href="/MLOps/lecture5/workflow/">
        <b>1. </b>Data Science Workflows
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture5/simple_pipeline/" title="Training Workflows" class="dd-item ">
        <a href="/MLOps/lecture5/simple_pipeline/">
        <b>2. </b>Training Workflows
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture5/cron/" title="Cron Jobs" class="dd-item ">
        <a href="/MLOps/lecture5/cron/">
        <b>3. </b>Cron Jobs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture5/airflow/" title="Apache Airflow" class="dd-item ">
        <a href="/MLOps/lecture5/airflow/">
        <b>4. </b>Apache Airflow
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/MLOps/lecture5/exercises/" title="Exercises" class="dd-item ">
        <a href="/MLOps/lecture5/exercises/">
        <b> </b>Exercises
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/MLOps/lecture6/" title="Lecture 6" class="dd-item 
        
        
        
        ">
      <a href="/MLOps/lecture6/">
          <b> </b>Lecture 6
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/MLOps/lecture7/" title="Lecture 7" class="dd-item 
        
        
        
        ">
      <a href="/MLOps/lecture7/">
          <b> </b>Lecture 7
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/MLOps/lecture8/" title="Lecture 8" class="dd-item 
        
        
        
        ">
      <a href="/MLOps/lecture8/">
          <b> </b>Lecture 8
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    <section id="footer">
      



<i class='fab fa-fw fa-github'></i> <a href="https://github.com/chicagodatascience/MLOps/"> GitHub repo</a>
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                   Docker 
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#docker-overview">Docker Overview</a>
<ul>
<li><a href="#docker-engine">Docker Engine</a></li>
<li><a href="#docker-architecture">Docker Architecture</a></li>
</ul></li>
<li><a href="#running-a-container">Running a Container</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Docker
            </h1>
          

        





<p>We will first get learn a bit more about docker. From their <a href="https://docs.docker.com/get-docker/">website</a>:</p>

<blockquote>
<p>Docker is an open platform (written in Go) for developing, shipping, and running applications.</p>

<p>Docker enables you to separate your applications from your infrastructure so you can deliver software quickly.</p>

<p>With Docker, you can manage your infrastructure in the same ways you manage your applications.</p>

<p>By taking advantage of Docker’s methodologies for shipping, testing, and deploying code quickly, you can significantly reduce the delay between writing code and running it in production.</p>
</blockquote>

<h3 id="docker-overview">Docker Overview</h3>

<ul>
<li>A loosely isolated environment (a container) can be created using Docker.</li>
<li>We can run multiple containers ona host (like our operating system: Mac/Win/Linux)</li>
<li>Containers are light on resources compared to VMs because they run directly with the host machine&rsquo;s kernel.

<ul>
<li>Example, you may have heard of the <a href="https://en.wikipedia.org/wiki/Linux_kernel">linux OS kernel</a>.</li>
<li>A <a href="https://en.wikipedia.org/wiki/Kernel_(operating_system)">kernel</a> is a computer program at the core of a computer&rsquo;s operating system with complete control over everything in the system</li>
</ul></li>
</ul>

<p><img src="440px-Kernel_Layout.svg.png" alt="kernel" />
<div style="text-align: right"> Source: <a href="https://en.wikipedia.org/wiki/Kernel_(operating_system">https://en.wikipedia.org/wiki/Kernel_(operating_system</a>)
</div></p>

<h4 id="docker-engine">Docker Engine</h4>

<ul>
<li><p>Is an app that is comprised of</p>

<ul>
<li>a server (<code>dockerd</code>) that handles creating containers</li>
<li>an API to talk to the server</li>

<li><p>a CLI (<code>docker</code>) that uses the API</p></li>

<li><p>The client and the daemon they interact via the API to handle creation and deployment of containers.</p></li>
</ul></li>
</ul>

<p><img src="engine-components-flow.png" alt="docker-eng" />
<div style="text-align: right"> Source: <a href="https://docs.docker.com/get-started/overview/">https://docs.docker.com/get-started/overview/</a>
</div></p>

<h4 id="docker-architecture">Docker Architecture</h4>

<p><img src="architecture.svg" alt="arch" />
<div style="text-align: right"> Source: <a href="https://docs.docker.com/get-started/overview/">https://docs.docker.com/get-started/overview/</a> </div></p>

<ul>
<li>Docker registry: stores Docker images. E.g., Docker hub is a public registry.</li>
<li>Docker objects:

<ul>
<li>Images</li>
<li>Networks</li>
<li>Containers</li>
<li>Volumnes</li>
<li>Plugins</li>
</ul></li>

<li><p>Image:</p>

<ul>
<li>Read only template of instructions to create a container.</li>
<li>It is often based on other images.</li>
<li><code>Dockerfile</code> creates images: slightly changing it does not mean rebuilding from scratch (lightweight)</li>
</ul></li>

<li><p>When we run the following command:</p>

<pre><code class="language-bash">$ docker run -i -t ubuntu /bin/bash
</code></pre>

<ul>
<li>Docker pulls the image from the registry</li>
<li>Creates a container</li>
<li>Allocates a private filesystem</li>
<li>Creates a network inteface</li>
<li>Executes <code>/bin/bash</code> because of the <code>-i -t</code> flag</li>
</ul></li>

<li><p>Services: Docker (&gt; 1.12) has the capability to make multiple daemons work together (as a <em>swarm</em>) with load balancing automatically handled.</p></li>

<li><p>Container:</p>

<ul>
<li>A runnable instance of an image</li>
<li>Several operations: create, start, stop, move, delete.</li>
<li>When deleted, it does NOT store state!</li>
<li>In contrast, a VM is a guest operating system that accesses host resources through a <em>hypervisor</em>.</li>
</ul></li>
</ul>

<p><img src="vm-vs-container.png" alt="vm-vs-container" />
<div style="text-align: right"> Source: <a href="https://docs.docker.com/get-started/">https://docs.docker.com/get-started/</a></div></p>

<h3 id="running-a-container">Running a Container</h3>

<ul>
<li><p>Download Docker for Desktop from <a href="https://docs.docker.com/get-docker/">here</a>. You will have to create a free account with them.</p></li>

<li><p>Check version <code>docker --version</code></p></li>

<li><p>Run a hello world container: <code>docker run hello-world</code></p></li>
</ul>

<p><img src="docker_hello_world.png" alt="docker_hello_world" /></p>

<ul>
<li><p>In the above, I changed to the appropriate conda env, although it is not necessary to do so. Its just a good practice.</p></li>

<li><p>We can check the list of images we have locally via:</p>

<pre><code class="language-bash">(datasci-dev) ttmac:~ theja$ docker image ls
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
hello-world         latest              bf756fb1ae65        8 months ago        13.3kB
</code></pre></li>

<li><p>We can check the active/recently run containers via the following command:</p>

<pre><code class="language-bash">(datasci-dev) ttmac:~ theja$ docker ps --all
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES
76cf92eaec76        hello-world         &quot;/hello&quot;            4 minutes ago       Exited (0) 4 minutes ago                       great_sinoussi
</code></pre></li>

<li><p>create a folder and copy the flask weather service app (<code>weather.py</code>) from before.</p>

<pre><code class="language-bash">(datasci-dev) ttmac:code theja$ mkdir docker-weather-service
(datasci-dev) ttmac:code theja$ cd docker-weather-service/
(datasci-dev) ttmac:code theja$ cp ../lecture1/weather.py docker-weather-service/
</code></pre></li>

<li><p>Recall that running <code>python weather.py</code> and accessing it from the browser using the url <code>http://localhost:5000/?msg=Chicago</code> should give you a JSON response back.</p></li>

<li><p>We will write a <code>Dockerfile</code> as below to build a custom image.</p>

<pre><code class="language-bash">FROM debian:buster-slim
MAINTAINER Your Name
RUN apt-get update \
&amp;&amp; apt-get install -y python3-pip python3-dev \
&amp;&amp; cd /usr/local/bin \
&amp;&amp; ln -s /usr/bin/python3 python \
&amp;&amp; pip3 install flask geopy requests
COPY weather.py weather.py
ENTRYPOINT [&quot;python3&quot;,&quot;weather.py&quot;]
</code></pre></li>

<li><p>Building the custom image is achieved by the following commands:</p>

<pre><code>docker image build -t &quot;weather_service&quot; .
docker images #to check the recently built image
</code></pre></li>

<li><p>You should see the following output (truncated, only showing the last)</p>

<pre><code class="language-bash">Step 4/5 : COPY weather.py weather.py
---&gt; 6ad721a3d5ef
Step 5/5 : ENTRYPOINT [&quot;python3&quot;,&quot;weather.py&quot;]
---&gt; Running in 70347eb72094
Removing intermediate container 70347eb72094
---&gt; ffd1e8b9172f
Successfully built ffd1e8b9172f
Successfully tagged weather_service:latest
(datasci-dev) ttmac:docker-weather-service theja$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
weather_service     latest              ffd1e8b9172f        9 seconds ago       492MB
debian              buster-slim         c7346dd7f20e        4 weeks ago         69.2MB
hello-world         latest              bf756fb1ae65        8 months ago        13.3kB
</code></pre></li>

<li><p>We will run the newly created <code>weather_service</code> image as a container locally suing the <code>docker run</code> command (recall how we did the hello world example).</p>

<pre><code class="language-bash">docker run -d -p 5000:5000 weather_service
docker ps
</code></pre></li>

<li><p>Here, the <code>-d -p</code> flags are to make the container run as a <em>daemon</em> (i.e., not interactive with the user) and to do port forwarding.</p>

<pre><code class="language-bash">(datasci-dev) ttmac:docker-weather-service theja$ docker run -d -p 5000:5000 weather_service
50dbba727a24c9534f0a88165a0601f9447ec5e2e3a6c21fe8443c12cfac63e4
(datasci-dev) ttmac:docker-weather-service theja$ docker ps -all
CONTAINER ID        IMAGE               COMMAND                CREATED             STATUS              PORTS                    NAMES
50dbba727a24        weather_service     &quot;python3 weather.py&quot;   4 seconds ago       Up 3 seconds        0.0.0.0:5000-&gt;5000/tcp   tender_shtern
</code></pre></li>

<li><p>Going to your browser and accessing <code>http://localhost:5000/?msg=Chicago</code> should give the appropriate weather response JSON object.</p></li>

<li><p>The model serving python files (both pytorch and surprise based) can be deployed locally or on a VPS (EC2/Vultr/Digitalocean) similarly.</p></li>

<li><p>Since hosting a container does not by itself give us additional features such as fault tolerance and scalability (being able to respond to many requests simultaneously), we will make use of ECS and GKE to address thee.</p></li>
</ul>


<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/MLOps/lecture3/intro/" title="Introduction"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/MLOps/lecture3/ecr/" title="Orchestration using ECS and ECR - Part I" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/MLOps/js/clipboard.min.js"></script>
    <script src="/MLOps/js/perfect-scrollbar.min.js"></script>
    <script src="/MLOps/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="/MLOps/js/jquery.sticky.js"></script>
    <script src="/MLOps/js/featherlight.min.js"></script>
    <script src="/MLOps/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/MLOps/js/modernizr.custom-3.6.0.js"></script>
    <script src="/MLOps/js/learn.js"></script>
    <script src="/MLOps/js/hugo-learn.js"></script>

    <link href="/MLOps/mermaid/mermaid.css" rel="stylesheet" />
    <script src="/MLOps/mermaid/mermaid.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-156050402-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-156050402-2');
</script>




<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">

  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>

  </body>
</html>

